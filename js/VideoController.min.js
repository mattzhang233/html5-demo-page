
function VideoController($model)
{var _self=this;var _model;var _demo={};var _paused=false;var _stopped=false;var _updatedValue=0;var _scrubbed=false;this.name="VideoController";this.init=function()
{var css_file='css/demos/'+_model.data.controller+'.css';if(!$('#style-'+_model.data.controller).length)
{$.ajax({url:css_file,success:function($css)
{$('<style id="style-'+_model.data.controller+'">'+$css+'</style>').appendTo('head');cssLoaded();}});}
else
{cssLoaded();}}
function cssLoaded()
{if(!_model.checkFeatureCompatibility())
{_model.featureNotSupported(['HTML5 Video']);return;}
var video_html='<video width="323" height="280" id="demo-video" poster="'+BASEURL+'/images/assets/png/global/adobe_video_loader.png"><source src="'+BASEURL+'videos/big-buck-bunny.mp4"  type=\'video/mp4; codecs="avc1.42E01E, mp4a.40.2"\'><source src="'+BASEURL+'videos/big-buck-bunny.webm" type=\'video/webm; codecs="vp8, vorbis"\'><source src="'+BASEURL+'videos/big-buck-bunny.ogv"  type=\'video/ogg; codecs="theora, vorbis"\'></video>';var canvas_html='<div id="demo-canvas"></div>';_demo.canvas={};_demo.canvas.object=$('#demo-html').append(canvas_html).find('canvas')[0];_demo.video={};_demo.video.file=$('#demo-html').append(video_html).find('video')[0];_demo.video.file.addEventListener('load',videoLoaded(_demo.video),false);_demo.video.loaded=false;_demo.video.progress=0;};this.stop=function()
{_demo={};$('#demo-html').html('');};this.updateValue=function($control)
{if($control.type==='button')
{if($($control.object).hasClass('active')&&!_stopped)
{_demo.video.file.pause();_stopped=true;videoStopProgress();}
else if(_stopped)
{_demo.video.file.play();if(_scrubbed)
{setVideoProgress(_updatedValue);_scrubbed=false}
_stopped=false;videoPlayProgress();}}
if($control.type=='sliderdown')
{if(_stopped){return};if(!_paused)
{_demo.video.file.pause();_paused=true;videoStopProgress();}}
if($control.type=='sliderup')
{_updatedValue=$control.value;_scrubbed=true;if(_stopped){return};if(_paused)
{setVideoProgress(_updatedValue);_demo.video.file.play();_paused=false;videoPlayProgress();}}
_model.checkMasterAchievement(_model.data.controller);};function videoLoaded($video)
{$video.file.play();videoPlayProgress();_demo.video.loaded=true;}
function videoPlayProgress()
{_demo.video.progress_interval=setInterval(videoUpdateProgress,500);}
function videoStopProgress()
{clearInterval(_demo.video.progress_interval);}
function videoUpdateProgress()
{if(_demo.video)
{_demo.video.progress=parseInt(((_demo.video.file.currentTime/_demo.video.file.duration)*100));if(!isNaN(_demo.video.file.duration))
{videoSliderSetProgress();}}}
function videoSliderSetProgress()
{if(_demo.video.progress!==NaN&&_demo.video.progress!==undefined)
{var slider_value;if($('body').hasClass('browser-webkit')&&!jQuery.browser.mobile)
{slider_value=$('#control-video-progress')[0].value;}
else
{slider_value=$('#control-video-progress').slider('value');}
if(slider_value!==_demo.video.progress)
{if($('body').hasClass('browser-webkit')&&!jQuery.browser.mobile)
{$('#control-video-progress')[0].value=_demo.video.progress;}
else
{$('#control-video-progress').slider({value:_demo.video.progress});}
var new_text=$('#overlay-video .label-slider-value').text().replace(/(\d+)/g,_demo.video.progress);if(new_text!=='NaN%')
{$('#overlay-video .label-slider-value').text(new_text);}}}}
function setVideoProgress($value)
{_demo.video.progress=$value;_demo.video.file.currentTime=_demo.video.file.duration*$value/100;}
(function(){_model=$model;})();return ExpressiveWeb.create(_self,{register:true,extend:'Controller'});};