
function FormsController($model)
{var _self=this;var _model;var _demo={};this.name="FormsController";this.updated=new signals.Signal();this.init=function()
{var css_file='css/demos/'+_model.data.controller+'.css';if(!$('#style-'+_model.data.controller).length)
{$.ajax({url:css_file,success:function($css)
{$('<style id="style-'+_model.data.controller+'">'+$css+'</style>').appendTo('head');cssLoaded();}});}
else
{cssLoaded();}}
function cssLoaded()
{if(!_model.checkFeatureCompatibility())
{_model.featureNotSupported(['HTML5 Forms']);return;}
if(jQuery.browser.msie&&jQuery.browser.version<9)
{_model.featureNotSupported(['HTML5 Forms']);return;}
_demo.fields=[];_demo.fields[0]={id:'age',type:"slider",text:'Age',show_value_on_label:true,unit:' years',value:25,min:5,max:75,step:5};_demo.fields[1]={id:'noun',type:"text",value:"Noun",page:"left"};_demo.fields[2]={id:'p_noun_1',type:"text",value:"Plural noun",page:"left"};_demo.fields[3]={id:'p_noun_2',type:"text",value:"Plural noun",page:"left"};_demo.fields[4]={id:'verb',type:"text",id:"verb-past",value:"Past tense verb",page:"right"};_demo.fields[5]={id:'adverb',type:"text",value:"Adverb",page:"right"};_demo.fields[6]={id:'color',type:"color",value:"#ff723f",text:"ink color"};_demo.fields[7]={id:'email',type:"text",subtype:"email",value:"Email"};_demo.fields[8]={id:'website',type:"text",subtype:"url",value:"Website"};_demo.fields[9]={id:'date',type:"date",value:"Date"};_demo.fields[10]={id:'form-button',type:"submit"};_demo.color='#FF8585';$('<div id="rhyme"></div>').appendTo($('#demo-html'));_demo.form=$('#rhyme').append('<form class="madlib-form"><div id="form-page-left"><h2>Chapter One</h2><div id="form-page-left-top"></div></div><div id="form-page-right"></div></form>')[0];for(var i=0;i<_demo.fields.length;i++)
{(function(i)
{var control={};var option=_demo.fields[i];control.type=option.type;control.id=option.id;switch(control.type)
{case'slider':control.value=option.value;control.min=option.min;control.max=option.max;control.id=option.id;control.step=1;control.text=option.text;control.unit=option.unit;if(option!==1)
{control.step=option.step;}
if($('body').hasClass('browser-webkit')&&!jQuery.browser.mobile)
{control.object=$('#form-page-left-top').append('<input name="'+control.id+'" type="range" step="'+control.step+'" min="'+control.min+'" max="'+control.max+'" value="'+control.value+'" id="madlib-'+control.id+'" class="madlib control-'+control.type+'" />').find('#madlib-'+control.id)[0];control.object.addEventListener('change',function()
{if(control.text!==undefined&&option.show_value_on_label!==undefined)
{$('label[for="madlib-'+control.id+'"]').text(control.text+': '+control.object.value+control.unit);_demo.age=control.object.value;}},null,false);}
else
{control.object=$('#form-page-left-top').append('<div id="madlib-'+control.id+'" class="control control-'+control.type+'"></div>').find('#madlib-'+control.id)[0];$('#madlib-'+control.id).slider({min:parseInt(control.min),max:parseInt(control.max),step:parseInt(control.step),value:parseInt(control.value),slide:function()
{control.object.value=$('#madlib-'+control.id).slider("option","value")
_self.updated.dispatch(control);if(control.text!==undefined&&option.show_value_on_label!==undefined)
{_demo.age=control.object.value;$('label[for="madlib-'+control.id+'"]').text(control.text+': '+control.object.value+control.unit);}}});}
if(control.text!==undefined&&option.show_value_on_label==undefined)
{$('#madlib-'+control.id).after('<label for="madlib-'+control.id+'">'+control.text+'</label>');}
if(control.text!==undefined&&option.show_value_on_label!==undefined)
{var unit='';if(control.unit!==undefined)
{unit=option.unit;}
$('#madlib-'+control.id).after('<label for="madlib-'+control.id+'">'+control.text+': '+control.value+unit+'</label>');}
break;case'color':control.value=option.value;var colorpicker_html='';if(!Modernizr.inputtypes.color)
{colorpicker_html='<input type="text" name="'+control.id+'" id="madlib-'+control.id+'" class="madlib control-'+control.type+'" value="'+control.value+'" readonly />';control.object=$('#form-page-left-top').append(colorpicker_html).find('#madlib-'+control.id)[0];control.text=option.text;control.label=$('#madlib-color').after('<label for="control-'+control.id+'">'+control.text+'</label>');var colorpicker=new jscolor.color(document.getElementById('madlib-'+control.id),{})
colorpicker.VALUE_UPDATED.add(function(color_value)
{_demo.color='#'+color_value;});}
else
{colorpicker_html='<input type="color" name="'+control.id+'" id="madlib-'+control.id+'" class="madlib control-'+control.type+'" value="'+control.value+'" />';control.object=$('#form-page-left-top').append(colorpicker_html).find('#madlib-'+control.id)[0];control.text=option.text;control.label=$('#madlib-color').after('<label for="control-'+control.id+'">'+control.text+'</label>');control.object.addEventListener('change',function(){_demo.color=control.object.value;},false);}
break;case'text':control.value=option.value;if(option.page===undefined)
{option.page='right';}
if(option.subtype!==undefined)
{control.subtype=option.subtype;if(control.subtype=='email')
{control.object=$('#form-page-'+option.page).append('<input name="'+control.id+'" type="'+control.subtype+'" id="madlib-'+i+'" class="madlib control-'+control.subtype+'" required />').find('#madlib'+i)[0];}
else if(control.subtype=='url')
{control.object=$('#form-page-'+option.page).append('<input name="'+control.id+'" type="'+control.subtype+'" id="madlib-'+i+'" class="madlib control-'+control.subtype+'" required />').find('#madlib'+i)[0];}}
else
{control.object=$('#form-page-'+option.page).append('<input name="'+control.id+'" id="madlib-'+i+'" class="madlib control-'+control.type+'" required />').find('#madlib-'+i)[0];}
$('#madlib-'+i).after('<label for="madlib-'+control.id+'">'+control.value+'</label>');break;case'date':var current_date=new Date();control.value=option.value;var m=String(parseInt(current_date.getMonth()+1));var month=(m.length<9)?'0'+m:m;control.object=$('#form-page-right').append('<input value="'+current_date.getFullYear()+'-'+month+'-'+current_date.getDate()+'" name="'+control.id+'" id="madlib-'+control.id+'" type="date" required>').find('#madlib-'+control.id)[0];if(control.value!=undefined)
{control.label=$('#madlib-'+control.id).after('<label for="madlib-'+control.id+'">'+control.value+'</label>');}
break;case'submit':control.object=$('#form-page-right').append('<input value="Submit" type="submit" id="madlib-'+control.id+'" class="madlib control-'+control.type+'">').find('#madlib-'+control.id)[0];$('.madlib-form').submit(function()
{var age=_demo.age;if(_demo.age===undefined)
{age=$('input:[name=age]').val();}
var noun=$('input:[name=noun]').val();var p_noun_1=$('input:[name=p_noun_1]').val();var p_noun_2=$('input:[name=p_noun_2]').val();var verb=$('input:[name=verb-past]').val();var adverb=$('input:[name=adverb]').val();var color=$('#madlib-color').val();var email=$('input:[name=email]').val();var website=$('input:[name=website]').val();var date=$('input:[name=date]').val();var o={};o.age=age;o.noun=noun;o.p_noun_1=p_noun_1;o.p_noun_2=p_noun_2;o.verb=verb;o.adverb=adverb;o.color=_demo.color;o.email=email;o.website=website;o.date=date;_updateMadlib(o);return false;});break;}})(i);};$('<div id="madlib-retry"></div>').appendTo($('#demo-html'));$('#madlib-7, label[for="madlib-email"], #madlib-8, label[for="madlib-website"], #madlib-date, label[for="madlib-date"], #madlib-form-button').wrapAll('<div id="form-right-bottom"></div>');$('#form-right-bottom').prepend('<h2>Submitted By</h2>');};this.stop=function()
{_demo={};$('#demo-html').html('');};function _updateMadlib($object)
{var age=$object.age;var noun=$object.noun;var p_noun_1=$object.p_noun_1;var p_noun_2=$object.p_noun_2;var verb=$object.verb;var adverb=$object.adverb;var color=$object.color;var email=$object.email;var website=$object.website;var date=$object.date;var age_str='elderly';if(age<=30)
{age_str='young';}else if(age>=35&&age<=50)
{age_str='middle-aged';}else if(age>=55&&age<=65)
{age_str='old';}
if(!$('#madlib').length)
{var madlib='<div id="madlib">'
madlib+='<h2>CHAPTER ONE</h2>';madlib+='<div id="p1"><p class="demo-madlib">There once was a(n) <span>'+age_str+'</span> woman who lived in a <span>'+noun+'.</span></p></div>';madlib+='<div id="p2"><p class="demo-madlib">She had so many <span>'+p_noun_1+'</span> she didn\'t know what do do;</p></div>';madlib+='<div id="p3"><p class="demo-madlib">She gave them some <span>'+p_noun_2+'</span> without any bread</p></div>';madlib+='<div id="p4"><p class="demo-madlib">Then <span>'+verb+'</span> them all <span>'+adverb+'</span> and put them to bed</p></div>';madlib+='<div id="p5"><p class="demo-madlib">written by <span>'+email+'</span> from <span>'+website+'</span> on <span>'+date+'</span></p></div>';madlib+='</div>';_demo.forms={};_demo.forms.textarea=$('#demo-html').append(madlib).find('#madlib');_demo.forms.textarea.css({position:'absolute',top:98,left:394,width:251,height:431,opacity:0,background:'#FFF5E7',opacity:0.8,zIndex:2}).animate({opacity:1},500);}
else
{var p1=$('#p1 .demo-madlib');p1.empty();p1.append($('<p class="demo-madlib">There once was a(n) <span>'+age_str+'</span> woman who lived in a <span>'+noun+'.</span></p>'));var p2=$('#p2 .demo-madlib');p2.empty();p2.append($('<p class="demo-madlib">She had so many <span>'+p_noun_1+'</span> she didn\'t know what do do;</p>'));var p3=$('#p3 .demo-madlib');p3.empty();p3.append($('<p class="demo-madlib">She gave them some <span>'+p_noun_2+'</span> without any bread</p>'));var p4=$('#p4 .demo-madlib');p4.empty();p4.append($('<p class="demo-madlib">Then <span>'+verb+'</span> them all <span>'+adverb+'</span> and put them to bed</p>'));var p5=$('#p5 .demo-madlib');p5.empty();p5.append($('<p class="demo-madlib">written by <span>'+email+'</span> from <span>'+website+'</span> on <span>'+date+'</span></p>'));}
$('#p1, #p2, #p3, #p4').css({color:_demo.color});_animateRhyme(1000);_displayRetry();_model.checkMasterAchievement(_model.data.controller);return false;};function _animateRhyme($to)
{if($to==130&&jQuery.browser.mobile)
{$to=100;}
$('#rhyme').animate({top:$to},{duration:500,specialEasing:{top:'easeOutSine'},complete:function(){}});};function _displayRetry()
{$('#madlib-retry').animate({opacity:1},{duration:300,specialEasing:{opacity:'easeOutSine'},complete:function(){}});$('#madlib-retry').click(_onRetryClick_handler);};function _onRetryClick_handler()
{_animateRhyme(130);$('#madlib-retry').animate({opacity:0},{duration:300,specialEasing:{opacity:'easeOutSine'},complete:function(){}});};(function(){_model=$model;})();return ExpressiveWeb.create(_self,{register:true,extend:'Controller'});};