
function TransitionsController($model)
{var _self=this;var _model;var _demo={};this.name="TransitionsController";this.init=function()
{if(!_model.checkFeatureCompatibility())
{_model.featureNotSupported(['CSS3 Transitions']);return;}
var time_offset=0;var leaves_floor=_model.data.animation_states[0].split('|');var leave_count=0;_demo.transition={}
_demo.transition.branches=$('#asset-branches')[0];_demo.transition.leaves=[];_demo.transition.leaves_floor=[];for(var i=0;i<leaves_floor.length;i++)
{var properties=leaves_floor[i].split('.');_demo.transition.leaves_floor.push({color:properties[0],id:properties[1],x:properties[3],y:properties[2],z:properties[4]});}
for(var i=0;i<6;i++)
{_demo.transition.leaves[i]=$('#asset-leaves-'+Number(i+1))[0];leave_count+=$('#asset-leaves-'+Number(i+1)+' .cube').length;}
for(var i=0;i<_demo.transition.leaves.length;i++)
{time_offset+=transitionAddTransforms($(_demo.transition.leaves[i]).find('.cube'),time_offset,true);}};this.stop=function()
{_demo={};$('#demo-html').html('');};this.updateValue=function()
{};function transitionAddTransforms($cubes,$time_offset,$is_leave)
{var return_value=$cubes.length*0.01*1000;if($time_offset!==undefined)
{setTimeout(opacityadd,$time_offset);}
else
{opacityadd();}
function opacityadd()
{for(var i=0;i<$cubes.length;i++)
{(function(i)
{var cube=$cubes[i];if(jQuery.browser.mobile)
{$(cube).css('opacity','1').css('-webkit-transition-property','-webkit-transform').css('-webkit-transition-duration','0.1s').css('-webkit-transition-timing-function','ease-out').css('-webkit-transition-delay',Number(i*0.05)+'s').css('-webkit-transform','translate3d(0, 0, 0)').css('-moz-transition-property','opacity, -moz-transform, transform').css('-moz-transition-duration','0.1s').css('-moz-transition-timing-function','ease-out').css('-moz-transition-delay',Number(i*0.05)+'s').css('-moz-transform','translate(0, 0)').css('-o-transition','all').css('-o-transition-duration','0.1s').css('-o-transition-timing-function','ease-out').css('-o-transition-delay',Number(i*0.05)+'s').css('-o-transform','translate(0, 0)').css('transition-property','opacity, -webkit-transform, transform').css('transition-duration','0.1s').css('transition-timing-function','ease-out').css('transition-delay',Number(i*0.05)+'s').css('transform','translate(0, 0)')}
transitionOpacityToggle(cube,0,undefined);if($is_leave===true)
{var cube_offset=$(cube).offset()
var cube_y=Number($(cube).closest('.asset').css('top').replace('px',''))+Number($(cube).css('top').replace('px',''));var y=Number(_demo.transition.leaves_floor[$(cube).index()].y)-Number($(cube).offset().top)+110;setTimeout(function(){transitionPositionToggle(cube,true,undefined,y)},3000);return_value+=$cubes.length*0.05*1000;}})(i);}}
return return_value;}
function transitionOpacityToggle($dom_object,$opacity,$timeout)
{if($opacity===0)
{$opacity=1;}
else
{$opacity=0;}
$($dom_object).css({opacity:$opacity});if($timeout===undefined)
{$timeout=10000;setTimeout(function(){transitionOpacityToggle($dom_object,$opacity,$timeout)},7000);}
else
{setTimeout(function(){transitionOpacityToggle($dom_object,$opacity,$timeout)},$timeout);}}
function transitionPositionToggle($dom_object,$autumn,$timeout,$y)
{if($y===undefined)
{$y=110;}
if($y<350)
{if($($dom_object).parent().attr('id')==='asset-leaves-1')
{$y=360;}
if($($dom_object).parent().attr('id')==='asset-leaves-2')
{$y=250;}
if($($dom_object).parent().attr('id')==='asset-leaves-3')
{$y=320;}
if($($dom_object).parent().attr('id')==='asset-leaves-4')
{$y=190;}
if($($dom_object).parent().attr('id')==='asset-leaves-5')
{$y=390;}
if($($dom_object).parent().attr('id')==='asset-leaves-6')
{$y=250;}}
var background_positions=$($dom_object).css('background-position').replace(/px/g,'').split(' ');if($autumn===false)
{$($dom_object).css('-webkit-transform','translate3d(0, '+$y+'px, 0)').css('-moz-transform','translate(0, '+$y+'px)').css('-o-transform','translate(0, '+$y+'px)').css('transform','translate(0, '+$y+'px)').css('background-position',background_positions[0]+'px -28px');$autumn=true;}
else
{$($dom_object).css('-webkit-transform','translate3d(0, 0, 0)').css('-moz-transform','translate(0, 0)').css('-o-transform','translate(0, 0)').css('transform','translate(0, 0)').css('background-position',background_positions[0]+'px -56px');$autumn=false;}
if($timeout===undefined)
{$timeout=10000;setTimeout(function(){transitionPositionToggle($dom_object,$autumn,$timeout,$y)},0);}
else
{setTimeout(function(){transitionPositionToggle($dom_object,$autumn,$timeout,$y)},$timeout);}}
(function(){_model=$model;})();return ExpressiveWeb.create(_self,{register:true,extend:'Controller'});};